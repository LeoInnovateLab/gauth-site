"use strict";(self.webpackChunkgauth_site=self.webpackChunkgauth_site||[]).push([[721],{6250:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>r});var i=t(4848),s=t(8453);const o={sidebar_position:3},l="Google \u6388\u6743\u767b\u5f55",c={id:"Integrations/google",title:"Google \u6388\u6743\u767b\u5f55",description:"1. \u7533\u8bf7\u5e94\u7528",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/Integrations/google.mdx",sourceDirName:"Integrations",slug:"/Integrations/google",permalink:"/zh/docs/Integrations/google",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Github \u6388\u6743\u767b\u5f55",permalink:"/zh/docs/Integrations/github"},next:{title:"Facebook \u8ba4\u8bc1\u767b\u5f55",permalink:"/zh/docs/Integrations/facebook"}},d={},r=[{value:"1. \u7533\u8bf7\u5e94\u7528",id:"1-\u7533\u8bf7\u5e94\u7528",level:2},{value:"2. \u96c6\u6210 GAuth",id:"2-\u96c6\u6210-gauth",level:2},{value:"3. \u6388\u6743",id:"3-\u6388\u6743",level:2},{value:"4. Demo",id:"4-demo",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"google-\u6388\u6743\u767b\u5f55",children:"Google \u6388\u6743\u767b\u5f55"}),"\n",(0,i.jsx)(n.h2,{id:"1-\u7533\u8bf7\u5e94\u7528",children:"1. \u7533\u8bf7\u5e94\u7528"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u521b\u5efa\u65b0\u9879\u76ee"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fdb\u5165 Google \u5f00\u53d1\u8005\u4e2d\u5fc3\uff0c",(0,i.jsx)(n.a,{href:"https://console.cloud.google.com/projectcreate",children:"\u521b\u5efa\u9879\u76ee"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Google\u521b\u5efa\u9879\u76ee\u9875\u9762",src:t(8859).A+"",title:"Google\u521b\u5efa\u9879\u76ee\u9875\u9762\u622a\u56fe",width:"1172",height:"920"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u521b\u5efa\u51ed\u636e"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Google\u521b\u5efa\u51ed\u636e\u9875\u9762",src:t(8862).A+"",title:"Google\u521b\u5efa\u51ed\u636e\u622a\u56fe",width:"1872",height:"1198"})}),"\n",(0,i.jsxs)(n.p,{children:["\u521b\u5efa\u51ed\u636e\u65f6\u9009\u62e9 ",(0,i.jsx)(n.code,{children:"OAuth client ID"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Google\u521b\u5efa\u51ed\u636e\u9009\u62e9OAuth",src:t(5757).A+"",title:"Google\u521b\u5efa\u51ed\u636e\u9009\u62e9OAuth\u622a\u56fe",width:"1068",height:"624"})}),"\n",(0,i.jsx)(n.p,{children:"\u5fc5\u987b\u5148\u914d\u7f6e\u5e94\u7528\u63a5\u53d7\u8ba4\u8bc1\u7684\u754c\u9762\uff0c\u6839\u636e\u63d0\u793a\u8fdb\u884c\u64cd\u4f5c"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Google\u540c\u610f\u914d\u7f6e\u5c4f\u5e55",src:t(2664).A+"",title:"\u540c\u610f\u914d\u7f6e\u5c4f\u5e55\u622a\u56fe",width:"2228",height:"684"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u9009\u62e9 ",(0,i.jsx)(n.code,{children:"User Type"})," \u4e3a ",(0,i.jsx)(n.code,{children:"External"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Google \u9009\u7528\u6237\u7c7b\u578b",src:t(4644).A+"",title:"Google \u9009\u7528\u6237\u7c7b\u578b\u622a\u56fe",width:"1338",height:"1264"})}),"\n",(0,i.jsx)(n.p,{children:"\u586b\u5165\u5bf9\u5e94\u7684\u4fe1\u606f\u540e\u5b8c\u6210\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Google OAuth\u5c4f\u5e55",src:t(9872).A+"",title:"Google OAuth\u5c4f\u5e55\u622a\u56fe",width:"2092",height:"1322"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u521b\u5efa ",(0,i.jsx)(n.code,{children:"WEB \u5e94\u7528"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:'\u518d\u6b21\u8bbf\u95ee "\u51ed\u636e" - "\u521b\u5efa\u51ed\u636e" - "OAuth \u5ba2\u6237\u7aef ID"\uff0c\u9009\u62e9"Web \u5e94\u7528"\uff0c\u7136\u540e\u6309\u7167\u63d0\u793a\u586b\u5165\u5185\u5bb9'}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Google OAuth \u521b\u5efaWEB\u5e94\u7528",src:t(7645).A+"",title:"Google OAuth \u521b\u5efaWEB\u5e94\u7528\u622a\u56fe",width:"1892",height:"1748"})}),"\n",(0,i.jsx)(n.p,{children:"\u4fdd\u5b58\u4fe1\u606f\u540e\uff0c\u4f1a\u5f39\u51fa\u5bc6\u94a5\u548c ID"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Google OAuth Client ID",src:t(8402).A+"",title:"Google OAuth Client ID\u622a\u56fe",width:"1214",height:"1318"})}),"\n",(0,i.jsx)(n.p,{children:"\u8bb0\u5f55\u4ee5\u4e0b\u4e09\u4e2a\u4fe1\u606f:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Client ID"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Client Secret"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Authorized redirect URIs"})}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"warning",children:[(0,i.jsx)(n.p,{children:"\u91cd\u8981\u63d0\u793a"}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Client secrets"})," \u53ef\u4fdd\u62a4\u4f60\u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\uff0c\u56e0\u6b64\u8bf7\u786e\u4fdd\u5176\u4e0d\u4f1a\u6cc4\u9732\uff01\u4e5f\u4e0d\u8981\u4e0e\u4efb\u4f55\u4eba\u5171\u4eab\u4f60\u7684",(0,i.jsx)(n.code,{children:"Client secrets"}),"\uff01\uff01\uff01"]})]}),"\n",(0,i.jsx)(n.h2,{id:"2-\u96c6\u6210-gauth",children:"2. \u96c6\u6210 GAuth"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5b89\u88c5 GAuth"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"go get github.com/LeoInnovateLab/gauth\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5bfc\u5165\u6ce8\u518c"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'import (\n  _ "github.com/LeoInnovateLab/gauth/register"\n)\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u521b\u5efa AuthRequest"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'authRequest, err := gauth.New().\n\t\tSource("google").\n\t\tClientId("your_client_id").\n\t\tClientSecret("your_client_secret").\n\t\tRedirectUrl("your_callback_url").\n\t\tBuild()\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u751f\u6210\u6388\u6743 URL"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"authorizeUrl, err := authRequest.Authorize(utils.CreateState())\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u53ef\u4ee5\u7528\u8fd9\u4e2a",(0,i.jsx)(n.code,{children:"authorizeUrl"}),"\u91cd\u5b9a\u5411\u8df3\u8f6c"]}),"\n",(0,i.jsx)(n.h2,{id:"3-\u6388\u6743",children:"3. \u6388\u6743"}),"\n",(0,i.jsx)(n.p,{children:"\u6388\u6743\u7ed3\u679c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "uid": "1141681479691234214",\n    "username": "louisquiet@gmail.com",\n    "nickname": "Leo",\n    "avatar": "https://lh3.googleusercontent.com/a/ACg8ocKXtNIpsOKHCoJvFIjAHZU3U76vTcD8CMt2K9LQBh-5Y6pZq-Ui=s96-c",\n    "blog": "",\n    "company": "",\n    "location": "en",\n    "email": "louisquiet@gmail.com",\n    "remark": "",\n    "gender": -1,\n    "source": "google",\n    "token": {\n      "access_token": "ya29.a0AXooCgvThY6MU0w68CfESXcmKt-xxxxxxxxxxx",\n      "expire_in": 3598,\n      "refresh_token": "",\n      "refresh_token_expire_in": 0,\n      "uid": "",\n      "open_id": "",\n      "access_code": "",\n      "union_id": "",\n      "scope": "https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid",\n      "token_type": "Bearer",\n      "id_token": "eyJhbGciOiJSUzI1NiIsImtpZCIasdfzZTU1ODExMWM3YzdhNzVjNWI2NTEzNGQyMmY2M2VlMDA2ZDAiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJhenAiOiI3MzgwODk3MzIzNzEtNmI0YWQzNGdtdmJqazFoaW80bW5mNnV2dnJmdGxwMm8uYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiI3MzgwODk3MzIzNzEtNmI0YWQzNGdtdmJqazFoaW80bW5mNnV2dnJmdGxwMm8uYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMTQxNjgxNDc5Njk1MzYyMTQwMDIxxxdfszcXVpZXRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImF0X2hhc2giOiJUMWtERFRkTW1VcGg2NTlMeU02OVVnIiwibmFtZSI6IkxlbyBMYXUiLCJwaWN0dXJlIjoiaHR0cHM6LyasfZ2xldXNlcmNvbnRlbnQuY29tL2EvQUNnOG9jS1h0Tklwc09LSENvSnZGSWpBSFpVM1U3NnZUYasfs5TFFCaC01WTZwWnEtVWk9czk2LWMiLCJnaXZlbl9uYW1lIjoiTGVvIiwiZmFtaWx5X25hbWUiOiJMYXUiLCJpYXQiOjE3MTQ3MTI2MzAsImV4cCI6MTcxNDcxNjIzMH0.O2Y0-c4tUcTxW7ay2BkT3L4YI2qy0p9s1J79DXWeiWRS3GtI8PzmYHLc-_QN8Dr49ggPE_mHIL1VdJ7C4U0FxhNEJLbg4KJJIODcdNj09D2llMou8TIc7krPihHeNPU_3Mj-Fs3VS36YIo4Gcked83wXaWOZpeV8QZvvUA37Gqm14dzQ076Y-sOZH2bOhjUkEWP6-4Ymx5cbSwgHtUuuYkjCRvb_Ase9eHTk-3_KczJzT-HzP5uHk-0E8YFwAJhztmDZWA64F8Og-iorsGd524GApX3aSDFzWiBKt0uDbBZ4F5XZFClnTp7DZdzeVkA07-uD9CoXRRBH6adsfas",\n      "mac_algorithm": "",\n      "mac_key": "",\n      "code": "",\n      "snapshot_user": false,\n      "oauth_token": "",\n      "oauth_token_secret": "",\n      "user_id": "",\n      "screen_name": "",\n      "oauth_callback_confirmed": null\n    },\n    "raw_user_info": "{\\n  \\"sub\\": \\"1141681479691234214\\",\\n  \\"name\\": \\"Leo\\",\\n  \\"given_name\\": \\"Leo\\",\\n  \\"family_name\\": \\"test\\",\\n  \\"picture\\": \\"https://lh3.googleusercontent.com/a/ACg8ocKXtNIpsOKHCoJvFIjAHZU3U76vTcD8CMt2K9LQBh-5Y6pZq-Ui\\\\u003ds96-c\\",\\n  \\"email\\": \\"louisquiet@gmail.com\\",\\n  \\"email_verified\\": true,\\n  \\"locale\\": \\"en\\"\\n}",\n    "snapshot_user": false\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"4-demo",children:"4. Demo"}),"\n",(0,i.jsxs)(n.p,{children:["\u63a8\u8350\u4f7f\u7528 ",(0,i.jsx)(n.a,{href:"https://github.com/LeoInnovateLab/gauth-demo",children:"GAuth Demo"})," \u8fdb\u884c\u6d4b\u8bd5\u3002"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Clone ",(0,i.jsx)(n.a,{href:"https://github.com/LeoInnovateLab/gauth-demo.git",children:"https://github.com/LeoInnovateLab/gauth-demo.git"})]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5c06\u7533\u8bf7\u7684",(0,i.jsx)(n.code,{children:"Client Id"}),"\u548c",(0,i.jsx)(n.code,{children:"Client secrets"}),"\u586b\u5165.env.demo"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u542f\u52a8\u9879\u76ee\uff0c\u8bbf\u95ee ",(0,i.jsx)(n.code,{children:"http://localhost:8080/auth/google/login"})]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8402:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/google_client_id-088f6e66d105896a3b6ee3d0aef1a913.jpg"},2664:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/google_consent_screen-de303315cb3069de3afcc972269ed9df.jpg"},8862:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/google_create_credentials-3d32da205a451ea8dd5ac53d6ed480b8.jpg"},5757:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/google_create_oauth-31b1d47ada88cd44b41516d23f271ea4.jpg"},7645:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/google_create_oauth_webapp-454d8bfc79f2063d0304b6b3f029951e.jpg"},8859:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/google_create_project-b79d126c811f3309648f58f712a0b400.jpg"},9872:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/google_finish_auth_screen-a0091eeef5659329ca4db66ba1f78e38.jpg"},4644:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/google_select_user_type-5c0eb3b08507ff4d34a68ed76f7fd7ca.jpg"},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>c});var i=t(6540);const s={},o=i.createContext(s);function l(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);