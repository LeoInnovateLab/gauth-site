"use strict";(self.webpackChunkgauth_site=self.webpackChunkgauth_site||[]).push([[113],{9281:(e,n,s)=>{s.d(n,{Ay:()=>r,RM:()=>c});var a=s(4848),t=s(8453);const c=[{value:"Demo",id:"demo",level:2}];function i(e){const n={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"demo",children:"Demo"}),"\n",(0,a.jsxs)(n.p,{children:["\u63a8\u8350\u4f7f\u7528 ",(0,a.jsx)(n.a,{href:"https://github.com/LeoInnovateLab/gauth-demo",children:"GAuth Demo"})," \u8fdb\u884c\u6d4b\u8bd5."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Clone ",(0,a.jsx)(n.a,{href:"https://github.com/LeoInnovateLab/gauth-demo.git",children:"https://github.com/LeoInnovateLab/gauth-demo.git"})]}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u5c06\u7533\u8bf7\u7684",(0,a.jsx)(n.code,{children:"App Id"}),"\u548c",(0,a.jsx)(n.code,{children:"App secrets"}),"\u586b\u5165.env.demo"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u542f\u52a8\u9879\u76ee\uff0c\u8bbf\u95ee ",(0,a.jsx)(n.code,{children:"http://localhost:8080/"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Demo",src:s(7664).A+"",title:"demo",width:"2594",height:"1854"})})]})}function r(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(i,{...e})}):i(e)}},290:(e,n,s)=>{s.d(n,{Ay:()=>r,RM:()=>c});var a=s(4848),t=s(8453);const c=[];function i(e){const n={admonition:"admonition",code:"code",p:"p",...(0,t.R)(),...e.components};return(0,a.jsxs)(n.admonition,{type:"warning",children:[(0,a.jsx)(n.p,{children:"\u91cd\u8981\u63d0\u793a"}),(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"Client secrets"})," \u53ef\u4fdd\u62a4\u4f60\u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\uff0c\u56e0\u6b64\u8bf7\u786e\u4fdd\u5176\u4e0d\u4f1a\u6cc4\u9732\uff01\u4e5f\u4e0d\u8981\u4e0e\u4efb\u4f55\u4eba\u5171\u4eab\u4f60\u7684",(0,a.jsx)(n.code,{children:"Client secrets"}),"\uff01\uff01\uff01"]})]})}function r(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(i,{...e})}):i(e)}},1547:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>h});var a=s(4848),t=s(8453),c=s(290),i=s(9281);const r={sidebar_position:5},l="Slack \u8ba4\u8bc1\u767b\u5f55",o={id:"Integrations/slack",title:"Slack \u8ba4\u8bc1\u767b\u5f55",description:"1. \u521b\u5efa Slack \u5e94\u7528",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/Integrations/slack.mdx",sourceDirName:"Integrations",slug:"/Integrations/slack",permalink:"/zh/docs/Integrations/slack",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Facebook \u8ba4\u8bc1\u767b\u5f55",permalink:"/zh/docs/Integrations/facebook"}},d={},h=[{value:"1. \u521b\u5efa Slack \u5e94\u7528",id:"1-\u521b\u5efa-slack-\u5e94\u7528",level:2},...c.RM,{value:"2. \u6574\u5408 GAuth",id:"2-\u6574\u5408-gauth",level:2},{value:"3. \u6388\u6743",id:"3-\u6388\u6743",level:2},...i.RM];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"slack-\u8ba4\u8bc1\u767b\u5f55",children:"Slack \u8ba4\u8bc1\u767b\u5f55"}),"\n",(0,a.jsx)(n.h2,{id:"1-\u521b\u5efa-slack-\u5e94\u7528",children:"1. \u521b\u5efa Slack \u5e94\u7528"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u8fdb\u5165 ",(0,a.jsx)(n.a,{href:"https://api.slack.com/apps",children:"Slack developer center"})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u6765\u5230\u4f60\u7684 app \u9875\u9762, \u7136\u540e\uff0c\u70b9\u51fb ",(0,a.jsx)(n.code,{children:"Create New App"})," \u6309\u94ae\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u9009\u62e9 ",(0,a.jsx)(n.code,{children:"From scratch"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"create slack app",src:s(6401).A+"",title:"create slack app screenshot",width:"1576",height:"1306"})}),"\n",(0,a.jsxs)(n.p,{children:["\u6210\u529f\u540e\u5c06\u83b7\u5f97 ",(0,a.jsx)(n.code,{children:"ClientId"})," and ",(0,a.jsx)(n.code,{children:"ClientSecret"}),"."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\u6dfb\u52a0 ",(0,a.jsx)(n.code,{children:"Redirect URLs"})," \u548c ",(0,a.jsx)(n.code,{children:"Scopes"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"slack scope",src:s(8529).A+"",title:"slack scope screenshot",width:"1562",height:"1220"})}),"\n",(0,a.jsxs)(n.p,{children:["Scopes \u52a0\u4e0a ",(0,a.jsx)(n.code,{children:"users.profile:read"}),", ",(0,a.jsx)(n.code,{children:"users:read"})," and ",(0,a.jsx)(n.code,{children:"users:read.email"}),"."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u5b89\u88c5\u4f60\u7684 app"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"slack install app",src:s(2412).A+"",title:"slack install app screenshot",width:"2004",height:"1028"})}),"\n",(0,a.jsx)(c.Ay,{}),"\n",(0,a.jsx)(n.h2,{id:"2-\u6574\u5408-gauth",children:"2. \u6574\u5408 GAuth"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u5b89\u88c5 GAuth"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"go get github.com/LeoInnovateLab/gauth\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"import register"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'import (\n  _ "github.com/LeoInnovateLab/gauth/register"\n)\n'})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u521b\u5efa AuthRequest"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'authRequest, err := gauth.New().\n\t\tSource("slack").\n\t\tClientId("your_app_id").\n\t\tClientSecret("your_app_secret").\n\t\tRedirectUrl("your_callback_url").\n\t\tBuild()\n'})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u751f\u6210\u6388\u6743 URL"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:"authorizeUrl, err := authRequest.Authorize(utils.CreateState())\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u53ef\u4ee5\u7528\u8fd9\u4e2a",(0,a.jsx)(n.code,{children:"authorizeUrl"}),"\u91cd\u5b9a\u5411\u8df3\u8f6c"]}),"\n",(0,a.jsx)(n.h2,{id:"3-\u6388\u6743",children:"3. \u6388\u6743"}),"\n",(0,a.jsx)(n.p,{children:"\u6388\u6743\u7ed3\u679c"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'\n  "data": {\n    "uid": "U0734xxx",\n    "username": "Leo",\n    "nickname": "Leo",\n    "avatar": "https://avatars.slack-edge.com/2024-05-07/7083458955538_ab4691c70b61ab7e6316_original.jpg",\n    "blog": "",\n    "company": "",\n    "location": "",\n    "email": "louisquiet@gmail.com",\n    "remark": "",\n    "gender": -1,\n    "source": "slack",\n    "token": {\n      "access_token": "xoxb-7096124864113-7083663139090",\n      "expire_in": 0,\n      "refresh_token": "",\n      "refresh_token_expire_in": 0,\n      "uid": "U07347xxxx",\n      "open_id": "",\n      "access_code": "",\n      "union_id": "",\n      "scope": "users:read,users:read.email,users.profile:read",\n      "token_type": "bot",\n      "id_token": "",\n      "mac_algorithm": "",\n      "mac_key": "",\n      "code": "",\n      "snapshot_user": false,\n      "oauth_token": "",\n      "oauth_token_secret": "",\n      "user_id": "",\n      "screen_name": "",\n      "oauth_callback_confirmed": null\n    },\n    "raw_user_info": "{\\"ok\\":true,\\"user\\":{\\"id\\":\\"U07347xxx\\",\\"team_id\\":\\"T072U3xxx\\",\\"name\\":\\"leo\\",\\"deleted\\":false,\\"color\\":\\"9f69e7\\",\\"real_name\\":\\"Leo\\",\\"tz\\":\\"Asia\\\\/Chongqing\\",\\"tz_label\\":\\"China Standard Time\\",\\"tz_offset\\":28800,\\"profile\\":{\\"title\\":\\"\\",\\"phone\\":\\"\\",\\"skype\\":\\"\\",\\"real_name\\":\\"Leo\\",\\"real_name_normalized\\":\\"Leo Lau\\",\\"display_name\\":\\"\\",\\"display_name_normalized\\":\\"\\",\\"fields\\":null,\\"status_text\\":\\"\\",\\"status_emoji\\":\\"\\",\\"status_emoji_display_info\\":[],\\"status_expiration\\":0,\\"avatar_hash\\":\\"ab4691c\\",\\"image_original\\":\\"https:\\\\/\\\\/avatars.slack-edge.com\\\\/2024-05-07\\\\/7083458955538_ab4691c70b61ab7e6316_original.jpg\\",\\"is_custom_image\\":true,\\"email\\":\\"louisquiet@gmail.com\\",\\"first_name\\":\\"Leo\\",\\"last_name\\":\\"\\",\\"image_24\\":\\"https:\\\\/\\\\/avatars.slack-edge.com\\\\/2024-05-07\\\\/7083458955538_ab4691c70b61ab7e6316_24.jpg\\",\\"image_32\\":\\"https:\\\\/\\\\/avatars.slack-edge.com\\\\/2024-05-07\\\\/7083458955538_ab4691c70b61ab7e6316_32.jpg\\",\\"image_48\\":\\"https:\\\\/\\\\/avatars.slack-edge.com\\\\/2024-05-07\\\\/7083458955538_ab4691c70b61ab7e6316_48.jpg\\",\\"image_72\\":\\"https:\\\\/\\\\/avatars.slack-edge.com\\\\/2024-05-07\\\\/7083458955538_ab4691c70b61ab7e6316_72.jpg\\",\\"image_192\\":\\"https:\\\\/\\\\/avatars.slack-edge.com\\\\/2024-05-07\\\\/7083458955538_ab4691c70b61ab7e6316_192.jpg\\",\\"image_512\\":\\"https:\\\\/\\\\/avatars.slack-edge.com\\\\/2024-05-07\\\\/7083458955538_ab4691c70b61ab7e6316_512.jpg\\",\\"image_1024\\":\\"https:\\\\/\\\\/avatars.slack-edge.com\\\\/2024-05-07\\\\/7083458955538_ab4691c70b61ab7e6316_1024.jpg\\",\\"status_text_canonical\\":\\"\\",\\"team\\":\\"T072U3xxxx\\"},\\"is_admin\\":true,\\"is_owner\\":true,\\"is_primary_owner\\":true,\\"is_restricted\\":false,\\"is_ultra_restricted\\":false,\\"is_bot\\":false,\\"is_app_user\\":false,\\"updated\\":1715133779,\\"is_email_confirmed\\":true,\\"who_can_share_contact_card\\":\\"EVERYONE\\"}}",\n    "snapshot_user": false\n  }\n}\n'})}),"\n",(0,a.jsx)(i.Ay,{})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},7664:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/demo-afd423f5dc83b5700ad0b1d4a78e093d.jpg"},6401:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/slack_create_app-dfca7ecfa3ccd5a9df8cde641e7c794c.jpg"},2412:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/slack_install_app-fb7c1b1d9360b3319070dea74f582408.jpg"},8529:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/slack_scope-74a61711195e577b6fe32b0cd63982b3.jpg"},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>r});var a=s(6540);const t={},c=a.createContext(t);function i(e){const n=a.useContext(c);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(c.Provider,{value:n},e.children)}}}]);